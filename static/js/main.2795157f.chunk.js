(this["webpackJsonpuploader-progress"]=this["webpackJsonpuploader-progress"]||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/upload.c2420f0d.svg"},19:function(e,t,a){e.exports=a.p+"static/media/checked.456b05f8.svg"},20:function(e,t,a){e.exports=a.p+"static/media/close.bbad8f02.svg"},21:function(e,t,a){e.exports=a.p+"static/media/file.84cefa90.svg"},22:function(e,t,a){e.exports=a(47)},27:function(e,t,a){},28:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),i=a.n(o),s=(a(27),a(2)),l=a(6),c=a(7),p=a(18),u=a.n(p),f=(a(28),function(e){var t=e.data,a=e.dispatch,o=Object(n.useRef)(null),i=function(n){n.preventDefault(),n.stopPropagation();var r=n.dataTransfer?Object(c.a)(n.dataTransfer.files):Object(c.a)(n.target.files);if(r&&r.length>0){var o=t.filesList.map((function(e){return e.name}));r=r.filter((function(e){return!o.includes(e.name)})),a({type:"ADD_FILE_TO_LIST",files:r}),n.dataTransfer&&n.dataTransfer.clearData(),a({type:"IS_IN_DROP_ZONE",inDropZone:!1}),e.setIsConfirm(!0)}};return r.a.createElement("div",{className:"containerUploader"},r.a.createElement("div",{className:t.inDropZone?"containerDrop inside-drag-area":"containerDrop",onDrop:function(e){return i(e)},onDragOver:function(e){return function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",a({type:"IS_IN_DROP_ZONE",inDropZone:!0})}(e)},onDragEnter:function(e){return function(e){e.preventDefault(),e.stopPropagation()}(e)},onDragLeave:function(e){return function(e){e.preventDefault(),e.stopPropagation(),a({type:"IS_IN_DROP_ZONE",inDropZone:!1})}(e)}},r.a.createElement("img",{src:u.a,alt:"drag and drop"}),r.a.createElement("div",{style:{marginBottom:"32px"}},r.a.createElement("b",null,"Drop your document here")," or",r.a.createElement("input",{ref:o,type:"file",name:"filesMultiple",id:"fileUpload",style:{display:"none"},"aria-label":"Carica documenti",multiple:!0,onChange:function(e){return i(e)},onClick:function(e){return e.target.value=""}}),r.a.createElement("span",{onClick:function(e){o.current.click()},style:{color:"#458DBD",fontSize:"20px",cursor:"pointer"}}," ","browse"))))}),d=a(19),m=a.n(d),g=a(20),E=a.n(g),v=a(21),_=a.n(v);function O(e,t){if(0===e)return"0 Bytes";var a=t+1||3,n=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,n)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}var h=a(5),D=a.n(h);var y=function(e,t){return function(a){a.lengthComputable&&(e.uploadPercentage=parseInt(Math.round(100*a.loaded/a.total)),t({type:"SINGLE_DOCUMENT_UPLOAD_START",payload:{fileName:e.name,progress:e.uploadPercentage}}))}};function L(e,t){t({type:"DOCUMENT_UPLOAD_START"});var a=0,n=e.map((function(e){return function(e){return e.content&&"string"===typeof e.content?new Promise((function(t,a){t(e.content)})):new Promise((function(t,a){var n=new FileReader;n.addEventListener("load",(function(){t(n.result)}),!1),n.readAsDataURL(e)}))}(e).then((function(n){t({type:"SINGLE_DOCUMENT_UPLOAD_START",payload:{fileName:e.name}});var r={};return r.onUploadProgress=y(e,t),r.onDownloadProgress=y(e,t),D.a.post("/",{content:n,filename:e.name,size:e.size},r).then((function(n,r){201===n.status||202===n.status?t({type:"SINGLE_DOCUMENT_UPLOAD_SUCCESS",payload:{fileName:e.name,fileProgress:e.uploadPercentage}}):(a++,t({type:"SINGLE_DOCUMENT_UPLOAD_ERROR",payload:{status:n.status,fileName:e.name,message:"Si \xe8 verificato un errore durante caricamento del file"}}))})).catch((function(n){var r=e.size>16e6?"Dimensione del file troppo grande":"Si \xe8 verificato un errore durante caricamento del file";a++,t({type:"SINGLE_DOCUMENT_UPLOAD_ERROR",payload:{fileName:e.name,message:r,status:500}})}))}))}));return D.a.all(n).then((function(n){t(a<1?{type:"DOCUMENT_UPLOAD_SUCCESS"}:{type:"DOCUMENT_UPLOAD_ERROR",error:{numberFiles:e.length,errorFiles:a}})}))}a(46);var N=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],i=Object(n.useReducer)((function(e,t){switch(t.type){case"IS_IN_DROP_ZONE":return Object(s.a)(Object(s.a)({},e),{},{inDropZone:t.inDropZone});case"ADD_FILE_TO_LIST":return Object(s.a)(Object(s.a)({},e),{},{filesList:e.filesList.concat(t.files)});case"REMOVE_FILE_TO_LIST":return Object(s.a)(Object(s.a)({},e),{},{filesList:e.filesList.filter((function(e){return e.name!==t.toRemove.name}))});case"CLEAR_FILES":return{inDropZone:!1,filesList:[]};case"SINGLE_DOCUMENT_UPLOAD_START":var a=e.filesList.find((function(e){return e.name===t.payload.fileName}));return a&&(a.progress=t.payload.progress),Object(s.a)({},e);default:return e}}),{inDropZone:!1,filesList:[]}),c=Object(l.a)(i,2),p=c[0],u=c[1];return r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/reactivegio/uploader_with_progress"},r.a.createElement("img",{width:"149",height:"149",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149",className:"attachment-full size-full",alt:"Fork me on GitHub","data-recalc-dims":"1"})),r.a.createElement("div",{className:"titlePage"},"Upload file"),r.a.createElement(f,{data:p,dispatch:u,setIsConfirm:o}),r.a.createElement("div",{className:"dropped-files"},p.filesList.map((function(e){var t=new Blob([e],{type:e.type}),a=URL.createObjectURL(t);return r.a.createElement("div",{key:e.name,className:"fileContainer"},r.a.createElement("img",{src:a,alt:"file uploaded",style:{width:"50px",height:"50px",verticalAlign:"middle",marginRight:"16px"},onError:function(e){e.target.onerror=null,e.target.src=_.a}}),r.a.createElement("div",{style:{display:"inline-block",verticalAlign:"middle",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"calc(100% - 66px)"}},r.a.createElement("span",{style:{fontSize:"13px",fontWeight:600}},e.name),r.a.createElement("br",null),r.a.createElement("span",{style:{fontSize:"13px",color:"rgb(69, 141, 189)"}},e.progress?O(e.size*e.progress/100,2)+" di "+O(e.size,2):O(e.size,2))),e.progress&&100===e.progress?r.a.createElement("div",{className:"topIcon"},r.a.createElement("img",{src:m.a,alt:"close icon"})):r.a.createElement("div",{className:"topIcon close",onClick:function(t){u({type:"REMOVE_FILE_TO_LIST",toRemove:e})}},r.a.createElement("img",{src:E.a,alt:"close icon"})),r.a.createElement("div",{className:"progressBar "},r.a.createElement("div",{className:"progressColored",style:{width:e.progress?e.progress+"%":0,backgroundImage:"linear-gradient(274deg, #00c3ea, #0090d1)",height:"100%"}})))}))),p.filesList.length>0&&a?r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"btn secondary",onClick:function(e){u({type:"CLEAR_FILES"})}},"Cancel"),r.a.createElement("div",{className:"btn primary",onClick:function(e){return L(p.filesList,u)}},"Confirm")):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.2795157f.chunk.js.map